CREATE TABLE IF NOT EXISTS Utente (
  ID_UTENTE     INT PRIMARY KEY AUTO_INCREMENT,
  NOME          VARCHAR(30) NOT NULL,
  COGNOME       VARCHAR(30) NOT NULL,
  EMAIL         VARCHAR(100) NOT NULL UNIQUE,
  PASSWORD      VARCHAR(255) NOT NULL,
  TELEFONO      VARCHAR(20),
  SESSO         CHAR(1),
  DATA_NASCITA  DATE
);

CREATE TABLE IF NOT EXISTS Ente (
  ID_ENTE     INT PRIMARY KEY AUTO_INCREMENT,
  NOME        VARCHAR(100) NOT NULL,
  EMAIL       VARCHAR(100),
  TELEFONO    VARCHAR(20)
);

CREATE TABLE IF NOT EXISTS Donazione (
  ID_DONAZIONE     INT PRIMARY KEY AUTO_INCREMENT,
  ID_UTENTE        INT,
  ID_ENTE          INT,
  NOME_DONATORE    VARCHAR(100),
  EMAIL_DONATORE   VARCHAR(100),
  DATA             DATE NOT NULL,
  SOMMA            DECIMAL(10,2) NOT NULL,
  CONSTRAINT FK_DON_UTENTE FOREIGN KEY (ID_UTENTE) REFERENCES Utente(ID_UTENTE),
  CONSTRAINT FK_DON_ENTE FOREIGN KEY (ID_ENTE) REFERENCES Ente(ID_ENTE)
);

CREATE TABLE IF NOT EXISTS Dottore (
  ID_DOTTORE   INT PRIMARY KEY AUTO_INCREMENT,
  NOME         VARCHAR(30) NOT NULL,
  COGNOME      VARCHAR(30) NOT NULL,
  EMAIL        VARCHAR(100) NOT NULL UNIQUE,
  TELEFONO     VARCHAR(20),
  SESSO        CHAR(1)
);

CREATE TABLE IF NOT EXISTS Animale (
  ID_ANIMALE          INT PRIMARY KEY AUTO_INCREMENT,
  SPECIE              VARCHAR(20) NOT NULL,
  DATA_ARRIVO         DATE NOT NULL,
  DATA_ADOZIONE       DATE,
  RAZZA               VARCHAR(20),
  SESSO               CHAR(1) NOT NULL,
  PESO                DECIMAL(5,2) NOT NULL,
  ETA                 INT,
  TAGLIA              VARCHAR(20) NOT NULL,
  COLORE              VARCHAR(30) NOT NULL,
  SEGNI_PARTICOLARI   TEXT
);

CREATE TABLE IF NOT EXISTS Adozione (
  ID_ADOZIONE     INT PRIMARY KEY AUTO_INCREMENT,
  ID_ANIMALE      INT NOT NULL UNIQUE,
  ID_UTENTE       INT NOT NULL,
  DATA_ADOZIONE   DATE NOT NULL,
  CONSTRAINT FK_ADOZIONE_ANIMALE FOREIGN KEY (ID_ANIMALE) REFERENCES Animale(ID_ANIMALE),
  CONSTRAINT FK_ADOZIONE_UTENTE FOREIGN KEY (ID_UTENTE) REFERENCES Utente(ID_UTENTE)
);

CREATE TABLE IF NOT EXISTS Visita (
  ID_VISITA      INT PRIMARY KEY AUTO_INCREMENT,
  ID_ANIMALE     INT NOT NULL,
  ID_DOTTORE     INT NOT NULL,
  DATA_VISITA    DATE NOT NULL,
  DESCRIZIONE    TEXT,
  CONSTRAINT FK_VISITA_ANIMALE FOREIGN KEY (ID_ANIMALE) REFERENCES Animale(ID_ANIMALE),
  CONSTRAINT FK_VISITA_DOTTORE FOREIGN KEY (ID_DOTTORE) REFERENCES Dottore(ID_DOTTORE)
);

CREATE TABLE IF NOT EXISTS admin_app (
  ID_ADMIN    INT PRIMARY KEY AUTO_INCREMENT,
  EMAIL       VARCHAR(100) NOT NULL UNIQUE,
  PASSWORD    VARCHAR(255) NOT NULL
);

